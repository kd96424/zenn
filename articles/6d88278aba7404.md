---
title: "ã€Flutterã€‘Variablesæ©Ÿèƒ½ã§FigmaÃ—Flutterã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å®Ÿç¾ã™ã‚‹"
emoji: "ğŸ’»"
type: "tech"
topics: [Flutter,Figma,ãƒ‡ã‚¶ã‚¤ãƒ³]
published: true
---
# è¨˜äº‹ã®æ¦‚è¦ã€€
æœ¬è¨˜äº‹ã§ã¯ã€Figma2023ã§ç™»å ´ã—ãŸã€Œ**Variablesæ©Ÿèƒ½**ã€ã‚’åˆ©ç”¨ã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å®Ÿç¾ã—ã€FigmaAPIçµŒç”±ã§Flutterã‚¢ãƒ—ãƒªã«é€£æºã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚
Figmaã‹ã‚‰Flutterã‚¢ãƒ—ãƒªã¸ã®Variablesã®é€£æºã«ã¯ã€ã‚³ãƒãƒ³ãƒ‰ä¸€ã¤ã§é€£æºå¯èƒ½ãª[figma_vars_to_dart](https://pub.dev/packages/figma_vars_to_dart)ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
â€»æœ¬è¨˜äº‹ã§è§£èª¬ã™ã‚‹å†…å®¹ã¯[ã“ã¡ã‚‰](https://help.figma.com/hc/en-us/articles/360040328273-Figma-plans-and-features)ã®ãƒ—ãƒ©ãƒ³ä¸€è¦§ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹REST API for variablesã®åˆ©ç”¨æ¨©é™ãŒå¿…è¦ã§ã™ã€‚ç¾æ™‚ç‚¹(2023/9/25)ã§ã€åˆ©ç”¨æ¨©é™ãŒã‚ã‚‹ã®ã¯Enterpriseã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿ã§ã€ãã®ä»–ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã¯APIçµŒç”±ã§Variableã‚’é€£æºã§ããªã„ãŸã‚æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

# å‰æçŸ¥è­˜
## ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã¨ã¯
è‰²ã®å€¤ã€ã‚¹ãƒšãƒ¼ã‚¹ã€ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£ã®ã‚¹ã‚±ãƒ¼ãƒ«ãªã©ã«åå‰ã‚’ã¤ã‘ã¦å®šç¾©ã—ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹æˆã™ã‚‹æœ€å°è¦ç´ ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã¨å‘¼ã¶ã€‚
ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢é–“ã®é€£æºã‚’åŠ¹ç‡åŒ–ã§ãã‚‹æ–¹æ³•è«–ã¨ã—ã¦æ³¨ç›®ã•ã‚Œã¦ã„ã‚‹ã€‚
è©³ã—ã„è§£èª¬ã¯[ã“ã¡ã‚‰ã®è¨˜äº‹](https://note.com/seyanote/n/n7b327a9cfd72)ãªã©ã‚’å‚è€ƒã«ã™ã‚‹ã€‚

## Variablesæ©Ÿèƒ½ã¨ã¯
[Variablesæ©Ÿèƒ½](https://help.figma.com/hc/en-us/articles/15339657135383-Guide-to-variables-in-Figma)ã¯Figma2023ã§ç™»å ´ã—ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®å®Ÿç¾ã«ã¯ä¸å¯æ¬ ãªã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®å®šç¾©ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
Figmaã§ã¯ãƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ ã«å¯¾ã—ã¦key-valueã®å®šç¾©ã¯ã§ããŸãŒã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®å®šç¾©ãŒã§ããšã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç­‰ãªã—ã«ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®å®Ÿç¾ã¯ã§ããªã‹ã£ãŸã€‚

## FigmaAPIã¨ã¯
Figmaä¸Šã®æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã€åˆ©ç”¨ã™ã‚‹ã“ã¨ã®ã§ãã‚‹APIã€‚åˆ©ç”¨æ–¹æ³•ã¯[ã“ã¡ã‚‰](https://www.figma.com/developers/api)ã‚’å‚è€ƒã«ã™ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯Variablesã‚’å–å¾—ã™ã‚‹ãŸã‚ã«Variables REST APIã‚’åˆ©ç”¨ã™ã‚‹ã€‚

# é–‹ç™ºç’°å¢ƒ
iphone14
iOS v16.1
Flutter v3.13.4

# å®Ÿè£…æ‰‹é †
**1. Figmaã§Variableã‚’å®šç¾©**
Figmaã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ä½•ã‚‚é¸æŠã—ã¦ã„ãªã„çŠ¶æ…‹ã§ã€Local Variablesã‹ã‚‰ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã™ã‚‹ã€‚
![](/images/figma_3.png =400x)
![](/images/figma_1.png =400x)
![](/images/figma_2.png =400x)

**2. Figma APIã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆ**
FigmaAPIã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã™ã‚‹ã€‚
ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®Settings>Personal access tokensã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã€ä¿å­˜ã—ã¦ãŠãã€‚
![](/images/figma_4.png =400x)
![](/images/figma_5.png =400x)
ä½œæˆæ™‚ã«è¨­å®šã™ã‚‹Scopesã®èª¬æ˜ã¯[ã“ã¡ã‚‰](https://www.figma.com/developers/api#authentication:~:text=EXPIRATION%20(in%20seconds)%3E%2C%0A%7D-,Scopes,-Scopes%20for%20personal)ã®ãƒšãƒ¼ã‚¸ã®Authentication>Scopesã‚’å‚ç…§ã€‚
ä»Šå›ã¯ã€Variablesã®æ¨©é™ãŒå¿…è¦ã¨ãªã‚‹ã€‚

**ï¼“. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```dart:pubspec.yaml
dependencies:
  figma_vars_to_dart: ^0.0.4
```

**4. Figmaã‹ã‚‰Flutterã¸Variablesã‚’é€£æº**
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§Figmaä¸Šã§å®šç¾©ã—ãŸVariablesãŒFlutterã‚¢ãƒ—ãƒªã¸é€£æºã•ã‚Œã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚
```dart
dart pub run figma_vars_to_dart generate \
	 --token $FIGMA_TOKEN \ â€»1
	 --fileId $YOUR_FIGMA_FILE_ID \ â€»2
	 --dartOutputFolder lib/shared/ui_constants \
	 --jsonOutputFile vars.json
```
â€»1
$FIGMA_TOKEN :
æ‰‹é †2ã§ç”Ÿæˆã—ãŸã‚¢ã‚¯ã‚»ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã€‚
â€»2
$YOUR_FIGMA_FILE_ID :
ãƒ–ãƒ©ã‚¦ã‚¶ã§Figmaã‚’é–‹ã„ã¦ã„ã‚‹å ´åˆã¯ãƒ‡ã‚¶ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®URLã®file/ä»¥é™ãŒ$YOUR_FIGMA_FILE_IDã¨ãªã‚‹ã€‚
![](/images/figma_6.png =400x)
ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã§é–‹ã„ã¦ã„ã‚‹å ´åˆã¯ã€ã‚¿ãƒ–ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã€Œãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã€ã‚’æŠ¼ã›ã°URLãŒå–å¾—ã§ãã‚‹ãŸã‚ä¸Šè¨˜ã¨åŒæ§˜ã«FILE_IDã‚’å–å¾—ã—ã€ã‚»ãƒƒãƒˆã™ã‚‹ã€‚

ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒFlutterã‚¢ãƒ—ãƒªå†…ã«ç”Ÿæˆã•ã‚Œã‚‹ã€‚
:::details color_primitives.dart
```dart:color_primitives.dart
import 'package:flutter/widgets.dart';

class ColorPrimitives {
  final Color white;
  final Color pink;
  final Color green;
  final Color black;
  final Color blue;

  ColorPrimitives({
    required this.white,
    required this.pink,
    required this.green,
    required this.black,
    required this.blue,
  });

  factory ColorPrimitives.value() => ColorPrimitives(
        white: const Color(0xFFF2ECEC),
        pink: const Color(0xFFDD006A),
        green: const Color(0xFF8CC93E),
        black: const Color(0xFF2C2C2C),
        blue: const Color(0xFF3000F2),
      );
}
```
:::

:::details color_semantics.dart
```dart:color_semantics.dart
import 'package:flutter/widgets.dart';
import 'ui_constants.dart';

class ColorSemantics {
  final Color background;
  final Color buttonPrimary;

  ColorSemantics({
    required this.background,
    required this.buttonPrimary,
  });

  factory ColorSemantics.light(ColorPrimitives colorPrimitives) =>
      ColorSemantics(
        background: colorPrimitives.white,
        buttonPrimary: colorPrimitives.blue,
      );

  factory ColorSemantics.dark(ColorPrimitives colorPrimitives) =>
      ColorSemantics(
        background: colorPrimitives.black,
        buttonPrimary: colorPrimitives.green,
      );
}
```
:::

:::details ui_constants.dart
```dart:ui_constants.dart
export 'color_primitives.dart';
export 'color_semantics.dart';
```
:::

**4. Flutterã§Variablesã‚’åˆ©ç”¨**
```dart:main.dart
import 'package:flutter/material.dart';
import 'shared/ui_constants/ui_constants.dart';
 
void main() {
  runApp(const MyApp());
}
 
// â‘ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰/ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§åˆ‡ã‚Šæ›¿ãˆ
extension ColorsExt on BuildContext {
  ColorSemantics get colors {
    final primitives = ColorPrimitives.value();
    if (MediaQuery.platformBrightnessOf(this) == Brightness.light) {
      return ColorSemantics.light(primitives);
    } else {
      return ColorSemantics.dark(primitives);
    }
  }
}
 
class MyApp extends StatelessWidget {
  const MyApp({super.key});
 
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      home: const MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}
 
class MyHomePage extends StatelessWidget {
  const MyHomePage({super.key, required this.title});
 
  final String title;
 
  @override
  Widget build(BuildContext context) {
    return Scaffold(
        appBar: AppBar(
          // â‘¡ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®åˆ©ç”¨
          backgroundColor: context.colors.background,
          // backgroundColor: context.colors.buttonPrimary,
          title: Text(
            title,
            style: TextStyle(color: Colors.black),
          ),
        ),
        body: null);
  }
}
```

# å‹•ä½œç¢ºèª
ä¸Šè¨˜main.dartã®ã€Œâ‘¡ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®åˆ©ç”¨ã€backgroundColorã§ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®åˆ©ç”¨ã‚’ç¢ºèªã§ãã‚‹ã€‚
ãƒ»backgroundColor: context.colors.backgroundã®å ´åˆ
![](/images/figma_7.png =400x)

ãƒ»backgroundColor: context.colors.buttonPrimaryã®å ´åˆ
![](/images/figma_8.png =400x)

# å‚è€ƒ
[figma_vars_to_dart](https://pub.dev/packages/figma_vars_to_dart)
[Figma plans and features](https://help.figma.com/hc/en-us/articles/360040328273-Figma-plans-and-features)
[ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã£ã¦ä½•?](https://note.com/seyanote/n/n7b327a9cfd72)
[Guide to variables in Figma](https://help.figma.com/hc/en-us/articles/15339657135383-Guide-to-variables-in-Figma)
[Figma API](https://www.figma.com/developers/api)
