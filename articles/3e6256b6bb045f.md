---
title: "ã€Flutterã€‘æ–‡å­—ã‚µã‚¤ã‚ºã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œæ–¹æ³•"
emoji: "ğŸ’»"
type: "tech"
topics: [Flutter,Dart,ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£]
published: true

---
# è¨˜äº‹ã®æ¦‚è¦
Flutterã‚¢ãƒ—ãƒªã®ãƒ†ã‚­ã‚¹ãƒˆã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯OSã®æ–‡å­—ã‚µã‚¤ã‚ºè¨­å®šã«åˆã‚ã›ã¦è‡ªå‹•çš„ã«èª¿æ•´ã•ã‚Œã¦ã—ã¾ã„ã€æ„å›³ã—ãªã„UIã®å´©ã‚Œã‚„æ“ä½œæ€§ã®ä½ä¸‹ãŒç™ºç”Ÿã™ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã«é©ç”¨ã•ã‚Œã‚‹æ–‡å­—ã‚µã‚¤ã‚ºã®ä¸Šé™å€¤ã‚’è¨­å®šã—ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã™ã‚‹å®Ÿè£…æ–¹æ³•ã«é–¢ã—ã¦è§£èª¬ã™ã‚‹ã€‚
â€»è§£èª¬ã«ã¯iOSã‚’åˆ©ç”¨ã—ã¾ã™

# å‰æçŸ¥è­˜
## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã¨ã¯
ã‚¢ãƒ—ãƒªé–‹ç™ºã«ãŠã„ã¦**ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**(Accessibility(A11y))ã¨ã¯ã€ã‚ã‚‰ã‚†ã‚‹ãƒ¦ãƒ¼ã‚¶ã‚„çŠ¶æ³ã§ã®ã‚¢ãƒ—ãƒªã®æ©Ÿèƒ½ã®åˆ©ç”¨ã®ã—ã‚„ã™ã•ã‚’è¡¨ã™ã€‚
ã‚¢ãƒ—ãƒªãŒã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«å¯¾å¿œã™ã‚‹ä¾‹ã¨ã—ã¦ã¯ã€è¦–è¦šéšœå®³ã®æ–¹ã®åˆ©ç”¨ã‚’è€ƒãˆã¦ã‚¢ãƒ—ãƒªå†…ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éŸ³å£°ã§èª­ã¿ä¸Šã’ã‚‹æ©Ÿèƒ½ã‚„ã€æ–‡å­—ã‚µã‚¤ã‚ºã‚’æ‹¡å¤§ã§ãã‚‹æ©Ÿèƒ½ã€ã‚ºãƒ¼ãƒ æ©Ÿèƒ½ã‚’å‚™ãˆã‚‹ã“ã¨ã‚„ã€è´è¦šéšœå®³ã®æ–¹ã®åˆ©ç”¨ã‚’è€ƒãˆã¦Bluetoothã§è£œè´å™¨ã¨é€£æºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãªã©ãŒã‚ã‚‹ã€‚
ã‚¢ãƒ—ãƒªé–‹ç™ºã®éš›ã¯ã€ã“ã®ã‚ˆã†ã«æ§˜ã€…ãªãƒ¦ãƒ¼ã‚¶ã®åˆ©ç”¨ã‚’æƒ³å®šã—ãŸæ©Ÿèƒ½ã®å®Ÿè£…ã‚„UIã«ã‚ˆã‚Šã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Šã‚’ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ç¾åœ¨ã€ä¸–ç•Œçš„ãªåŸºæº–ã¨ã—ã¦ã¯[WCAG2.0](https://waic.jp/translations/WCAG20/Overview.html)ï¼ˆWeb Content Accessibility Guidelinesï¼‰ã¨ã„ã†ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãŒã‚ã‚Šã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã‚ˆã‚Šå¤šãã®äººã€…ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®æ¨™æº–çš„ãªæŒ‡é‡ãŒå®šã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ä»Šå¾Œå…¬é–‹ã•ã‚Œã‚‹WCAG3.0ã§ã¯ã€ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã«é–¢ã™ã‚‹å†…å®¹ã‚‚è¿½åŠ ã•ã‚Œã‚‹äºˆå®šã§ã€ç¾åœ¨ã¯ãƒ‰ãƒ©ãƒ•ãƒˆç‰ˆã®ã¿å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã€‚

# Flutterã«ãŠã‘ã‚‹æ–‡å­—ã‚µã‚¤ã‚ºã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®åŸºæœ¬
iOSã§ã¯ã€OSã®è¨­å®š>ã€Œã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã€>ã€Œç”»é¢è¡¨ç¤ºã¨ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚ºã€>ã€Œã•ã‚‰ã«å¤§ããªæ–‡å­—ã€ã‹ã‚‰æ–‡å­—ã‚µã‚¤ã‚ºã®å€ç‡å€¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
Flutterã«ãŠã„ã¦ä¸Šè¨˜ã§è¨­å®šã—ãŸå€¤ã¯ã€MediaQuery.textScaleFactorOf(context)ã§å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã‚Œã‚’ç”¨ã„ã¦æ–‡å­—ã®ã‚µã‚¤ã‚ºã¯è«–ç†ãƒ”ã‚¯ã‚»ãƒ«ã§æ±ºå®šã•ã‚Œã‚‹ã€‚
```
MediaQuery.textScaleFactorOf(context);
```
ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…(main.dart)ã§ã¯ãƒ†ã‚­ã‚¹ãƒˆã¨æ–‡å­—ã‚µã‚¤ã‚ºã®å€ç‡ã‚’è¡¨ç¤ºã—ã¦ãã®å‹•ä½œã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
:::details main.dart
```dart:main.dart
import 'package:flutter/material.dart';
 
void main() {
  runApp(const MyApp());
}
 
class MyApp extends StatelessWidget {
  const MyApp({super.key});
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: true,
      ),
      home: const MyHomePage(),
    );
  }
}
 
class MyHomePage extends StatelessWidget {
  const MyHomePage({super.key});
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: const Text('ã‚¿ã‚¤ãƒˆãƒ«'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Column(
              children: [
                const Text(
                  'æœ¬æ–‡ãƒ†ã‚¹ãƒˆ1',
                ),
                const Text(
                  'æœ¬æ–‡ãƒ†ã‚¹ãƒˆ2',
                ),
                //OSè¨­å®šã®æ–‡å­—å€ç‡ã‚’å–å¾—
                Text(MediaQuery.textScaleFactorOf(context).toString()),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
```
:::
ãƒ»å€ç‡1.0å€ã«è¨­å®šã—ãŸå ´åˆ
| OSè¨­å®š | ã‚¢ãƒ—ãƒªç”»é¢ |
| ---- | ---- |
| ![](/images/a11y_1.png =400x) | ![](/images/a11y_2.png =400x) |

ãƒ»å€ç‡ç´„3.1å€(æœ€å¤§)ã«è¨­å®šã—ãŸå ´åˆ
| OSè¨­å®š | ã‚¢ãƒ—ãƒªç”»é¢ |
| ---- | ---- |
| ![](/images/a11y_3.png =400x) | ![](/images/a11y_4.png =400x) |

ä¸Šè¨˜ã®ã‚ˆã†ã«Text Widgetã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§OSã®è¨­å®šå€¤ã«ä¾å­˜ã—ã¦æ–‡å­—ã®ã‚µã‚¤ã‚ºãŒå¤‰åŒ–ã™ã‚‹ã€‚
ãã®ä»•çµ„ã¿ã¯Text Widgetã®å†…éƒ¨ã‚’è¦‹ã‚‹ã“ã¨ã§ç¢ºèªã§ãã‚‹ã€‚Text Widgetå†…ã®RichTextã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€textScaleFactorãŒæ–‡å­—ã‚µã‚¤ã‚ºã‚’æ±ºã‚ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚ã‚‹ã€‚
```dart:main.dart
Widget result = RichText(
      ---çœç•¥---
      textScaleFactor: textScaleFactor ?? MediaQuery.textScaleFactorOf(context),
      ---çœç•¥---
    );
```
textScaleFactorãŒnullã®å ´åˆã¯OSè¨­å®šã®å€ç‡å€¤ãŒé©ç”¨ã•ã‚Œã‚‹ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã§ãã®æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
```dart:main.dart
---çœç•¥---
body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Column(
              children: [
                const Text(
                  'æœ¬æ–‡ãƒ†ã‚¹ãƒˆ1',
                  // 1.0då€ã§å›ºå®š
                  textScaleFactor: 1.0,
                ),
                const Text(
                  'æœ¬æ–‡ãƒ†ã‚¹ãƒˆ2',
                ),
                //OSè¨­å®šã®æ–‡å­—å€ç‡ã‚’å–å¾—
                Text(MediaQuery.textScaleFactorOf(context).toString()),
              ],
            ),
          ],
        ),
---çœç•¥---
```
OSã®è¨­å®šã§ã¯å€ç‡å€¤ã‚’æœ€å¤§(ç´„3.1å€)ã«è¨­å®šã—ã¦ãŠã‚Šã€textScaleFactorã‚’æŒ‡å®šã—ãŸText Widgetã¯ãã®å€¤ãŒé©ç”¨ã•ã‚Œã€ä½•ã‚‚æŒ‡å®šã—ã¦ã„ãªã„Widgetã¯OSã®è¨­å®šå€¤ãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹ã€‚
![](/images/a11y_5.png =400x)

# é–‹ç™ºæ™‚ã«å¿…è¦ãªå¯¾å¿œ
ä¸Šè¨˜ã®é€šã‚Šã€Flutterã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®Text Widgetã¯OSè¨­å®šã®æ–‡å­—ã‚µã‚¤ã‚ºã«ä¾å­˜ã—ã¦å¤‰åŒ–ã™ã‚‹ãŸã‚ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’æ„è­˜ã—ã¦ã„ãªã„Flutterã‚¢ãƒ—ãƒªã§ã¯æ„å›³ã›ãšUIãŒå´©ã‚Œã¦ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚Šã€æ“ä½œæ€§ã®ä½ä¸‹ã«ã¤ãªãŒã‚‹å ´åˆãŒã‚ã‚‹ã€‚
ä»Šå›ã¯ã€ãã®ã‚ˆã†ãªå•é¡Œã‚’æœªç„¶ã«é˜²ããŸã‚ã®å®Ÿè£…æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚
### 1.TextScaleFactorã®ä¸Šé™å€¤ã‚’åˆ¶å¾¡ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®ä½œæˆ
ä»¥ä¸‹ã®ã‚ˆã†ã«ç«¯æœ«ã®ã‚µã‚¤ã‚º(æ¨ªå¹…)ã‚’æ¡ä»¶ã«ä¸Šé™å€¤ã‚’å®šã‚ã¦ãŠãã€‚
```dart:text_scale_factor.dart
import 'package:flutter/material.dart';

class TextScaleFactor extends StatelessWidget {
  const TextScaleFactor({
    super.key,
    required this.child,
  });
  final Widget child;
  // ä¸Šé™å€¤
  static const _maxTextScaleFactor = 1.5;
  static const _midTextScaleFactor = 1.2;
  static const _minTextScaleFactor = 1.1;
  // ç«¯æœ«ã‚µã‚¤ã‚º(æ¨ªå¹…)
  static const _minDeviceSizeWidth = 380.0;
  static const _maxDeviceSizeWidth = 400.0;

  @override
  Widget build(BuildContext context) {
    final mediaQuery = MediaQuery.of(context);
    final screenWidthSize = MediaQuery.of(context).size.width;
    // å€ç‡ã®ä¸Šé™å€¤
    double upperTextScaleFactor;
    // 400pxä»¥ä¸Šã®ç«¯æœ«
    if (screenWidthSize >= _maxDeviceSizeWidth) {
      upperTextScaleFactor = _maxTextScaleFactor;
      // 380ä»¥ä¸Š400pxæœªæº€ã®ç«¯æœ«
    } else if (screenWidthSize >= _minDeviceSizeWidth) {
      upperTextScaleFactor = _midTextScaleFactor;
      // 380pxæœªæº€ã®ç«¯æœ«
    } else {
      upperTextScaleFactor = _minTextScaleFactor;
    }
    final textScaleFactor =
        mediaQuery.textScaleFactor.clamp(0.0, upperTextScaleFactor);
    return MediaQuery(
      data: mediaQuery.copyWith(
        textScaleFactor: textScaleFactor,
      ),
      child: child,
    );
  }
}
```

### 2.ã‚¢ãƒ—ãƒªå…¨ä½“ã«é©ç”¨
MaterialAppã®builderãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã†ã“ã¨ã§ä½œæˆã—ãŸä¸Šé™å€¤ã‚’ã‚¢ãƒ—ãƒªå…¨ä½“ã«é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
```dart:main.dart
class MyApp extends StatelessWidget {
  const MyApp({super.key});
 
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: true,
      ),
      home: const MyHomePage(),
      // ã‚¢ãƒ—ãƒªå…¨ä½“ã«é©ç”¨
      builder: (context, child) => TextScaleFactor(child: child!),
    );
  }
}
```
main.dartå…¨æ–‡
:::details main.dart
```dart:main.dart
import 'package:flutter/material.dart';
 
void main() {
  runApp(const MyApp());
}
 
class MyApp extends StatelessWidget {
  const MyApp({super.key});
 
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: true,
      ),
      home: const MyHomePage(),
      builder: (context, child) => TextScaleFactor(child: child!),
    );
  }
}
 
class MyHomePage extends StatelessWidget {
  const MyHomePage({super.key});
 
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: const Text('ã‚¿ã‚¤ãƒˆãƒ«'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Column(
              children: [
                const Text(
                  'æœ¬æ–‡ãƒ†ã‚¹ãƒˆ1',
                ),
                const Text(
                  'æœ¬æ–‡ãƒ†ã‚¹ãƒˆ2',
                ),
                //OSè¨­å®šã®æ–‡å­—å€ç‡
                Text(MediaQuery.textScaleFactorOf(context).toString()),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
```
:::

### å‹•ä½œç¢ºèª
OSã§ä¸Šé™å€¤ä»¥ä¸Šã®å€¤ã‚’è¨­å®šã—ã¦ã‚‚ã€ã‚¢ãƒ—ãƒªã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ä¸Šé™å€¤ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã€‚
| ç«¯æœ«ã‚µã‚¤ã‚º | OSè¨­å®š 1.0å€ | OSè¨­å®š ç´„3.1å€(æœ€å¤§) |
| ---- | ---- | ---- |
|375px(iphone11Pro)| ![](/images/a11y_6.png =400x) | ![](/images/a11y_7.png =400x) |
|390px(iphone14)| ![](/images/a11y_8.png =400x) | ![](/images/a11y_9.png =400x) |
|428px(iPhone12ProMax)| ![](/images/a11y_10.png =400x) | ![](/images/a11y_11.png =400x) |

ã‚¢ãƒ—ãƒªé–‹ç™ºæ™‚ã¯ã€ã‚ã‚‰ã‹ã˜ã‚ä¸Šè¨˜ã®ã‚ˆã†ã«ä¸Šé™å€¤ã‚’å®šã‚ã¦ãŠãã“ã¨ã§ã€OSè¨­å®šã®å½±éŸ¿ã«ã‚ˆã‚‹æ„å›³ã—ãªã„UIå´©ã‚Œã‚„ã‚¨ãƒ©ãƒ¼ã€æ“ä½œæ€§ã®ä½ä¸‹ã‚’æœ€ä½é™é˜²ãã“ã¨ãŒã§ãã‚‹ã€‚
ç”»é¢ã®è¦ä»¶ã«ã‚ˆã£ã¦ã¯ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã®ä¸Šé™å€¤ã ã‘ã§ã¯å¯¾å¿œã§ããªã„å ´åˆãŒã‚ã‚‹ãŸã‚ã€ãã®å ´åˆã¯å„Widgetã”ã¨ã«textScaleFactorã®åˆ¶å¾¡ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

# å‚è€ƒ
[WINTICKET Flutter ã‚¢ãƒ—ãƒªã¨ Text Scale Factor ã®é—˜ã„](https://developers.cyberagent.co.jp/blog/archives/36310/)
[Flutterã§ç«¯æœ«ã®æ–‡å­—ã‚µã‚¤ã‚ºè¨­å®šã‚’ç„¡è¦–ã™ã‚‹æ–¹æ³•](https://zenn.dev/ktakayama/articles/1b741f765b4f24)